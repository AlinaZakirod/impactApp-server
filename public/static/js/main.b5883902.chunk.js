(this["webpackJsonpptwd-client"]=this["webpackJsonpptwd-client"]||[]).push([[0],{34:function(e,t,a){e.exports=a(66)},39:function(e,t,a){},40:function(e,t,a){},66:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),l=a(31),c=a.n(l),o=(a(39),a(3)),r=a(4),i=a(6),m=a(5),u=a(7),d=(a(40),a(9)),p=Object(d.a)(),g=a(1),h=a.n(g),E=a(14),f=a(12),N=a(8),v=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={fullName:"",email:"",password:"",message:null,suggestedActs:""},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"genericSync",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(f.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/api/signup"),this.state,{withCredentials:!0}).then((function(e){console.log("is this working?????",e);var a=e.data.populatedUser;t.props.onUserChange(a),console.log("SIGNUP|POPULATED USER:",a),t.props.history.push("/")})).catch((function(e){if(e.response.data)return t.setState({message:e.response.data.message})}))}},{key:"render",value:function(){var e=this;console.log("Do I have user in Signup: ",this.props.currentUser),console.log(" what is this >>>>>> ",this);var t=this.state,a=t.fullName,n=t.email,l=t.password;t.suggestedActs;return console.log("SIGNUP STATE:",this.state),console.log("SIGNUP PROPS:",this.props),this.props.currentUser?s.a.createElement("div",null,s.a.createElement("h2",null,"Welcome to your app, ",this.props.currentUser.fullName," ! You're signed in!"," ")):s.a.createElement("section",{className:"hero is-fullheight has-bg-img horizontalCenter"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"column is-one-fifth"}),s.a.createElement("div",{className:"column is-one-quarter has-text-left"},s.a.createElement("form",{onSubmit:function(t){e.handleSubmit(t)}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label is-large is-1"},"Sign up"),s.a.createElement("p",{className:"control has-icons-left "},s.a.createElement("input",{className:"input is-medium",value:a,onChange:function(t){return e.genericSync(t)},type:"text",name:"fullName",placeholder:"Your Name"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-user"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input is-medium",value:n,onChange:function(t){return e.genericSync(t)},type:"email",name:"email",placeholder:"Email@ironhack.com"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-envelope"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input is-medium",value:l,onChange:function(t){return e.genericSync(t)},type:"password",name:"password",placeholder:"Password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-lock"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button"},"Sign Up"))),s.a.createElement("div",null,s.a.createElement("p",null,"Already have an account?",s.a.createElement(N.a,{className:"impactInlineButton",to:"/login-page"}," ","Login"))))),this.state.message&&s.a.createElement("div",null," ",this.state.message," ")))}}]),t}(s.a.Component),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",message:null},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"genericSync",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(f.a)({},a,n))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/api/login"),this.state,{withCredentials:!0}).then((function(e){var a=e.data.userDoc;t.props.onUserChange(a),t.props.history.push("/")})).catch((function(e){if(console.log("err: ",e.response),e.response.data)return t.setState({message:e.response.data.message})}))}},{key:"render",value:function(){var e=this;console.log("Do I have user in Login: ",this.props.currentUser);var t=this.state,a=t.email,n=t.password;return s.a.createElement("section",{className:"hero is-fullheight has-bg-img  horizontalCenter "},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"column is-one-fifth"}),s.a.createElement("div",{className:"column is-one-quarter has-text-left"},s.a.createElement("form",{onSubmit:function(t){e.handleSubmit(t)}},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label is-large is-1"},"Login"),s.a.createElement("p",{className:"control has-icons-left "},s.a.createElement("input",{className:"input is-medium",value:a,onChange:function(t){return e.genericSync(t)},type:"email",name:"email",placeholder:"Email@ironhack.com"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-envelope"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("input",{className:"input is-medium",value:n,onChange:function(t){return e.genericSync(t)},type:"password",name:"password",placeholder:"Password"}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-lock"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("button",{className:"button"},"Login"))),s.a.createElement("div",null,s.a.createElement("p",null,"Don't have an account?"," ",s.a.createElement(N.a,{className:"impactInlineButton",to:"/signup-page"},"Signup"))))),this.state.message&&s.a.createElement("div",null," ",this.state.message," ")))}}]),t}(s.a.Component),b=a(17);var C=function(e){return console.log("PROPS CATEGORY:",e),e.currentUser?e.categoriesFromBackEnd.map((function(t,a){return s.a.createElement("div",{className:"column is-3"},s.a.createElement("div",{className:"card"},s.a.createElement("header",{className:"card-header"},s.a.createElement(N.a,Object.assign({},e,{key:a,to:{pathname:"/category/".concat(t._id),state:{theId:t._id,details:t}}}),s.a.createElement("p",{className:"card-header-title is-centered",key:a},t.title))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",{key:a},t.description)))))})):e.categoriesFromBackEnd.map((function(e,t){return s.a.createElement("div",{className:"card column is-3"},s.a.createElement("header",null,s.a.createElement(N.a,{key:t,to:{pathname:"/login-page"}},s.a.createElement("p",{className:"card-header-title is-centered",key:t},e.title))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",{key:t},e.description))))}))},A=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).addNewCategory=function(e){e.preventDefault();var t=Object(b.a)(a.props.categoriesFromBackEnd),n={title:a.state.titleCategory,description:a.state.descriptionCategory,author:a.props.currentUser};t.unshift(n),a.setState({titleCategory:"",descriptionCategory:"",showAddCategoryForm:!1,categoriesList:t}),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/category/create"),n).then((function(e){a.props.getAllCategories()})).catch((function(e){return console.log("Error while adding the new Category ",e)})),console.log("Author:",a.props.currentUser),console.log("New Category is:",n)},a.updateInput=function(e){a.setState(Object(f.a)({},e.target.name,e.target.value))},a.showModal=function(){document.getElementById("displayModal");var e=document.getElementById("modal");document.getElementsByClassName("modal-close")[0];e.style.display="block"},a.closeModal=function(){var e=document.getElementById("modal");document.getElementsByClassName("modal-close")[0];e.style.display="none"},a.state={showAddCategoryForm:!1,titleCategory:"",descriptionCategory:"",categoriesFromBackEnd:a.props.categoriesFromBackEnd},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return console.log("PROPS HOME PAGE",this.props),console.log("HOME | USER",this.props.currentUser),null!==this.props.categoriesFromBackEnd?s.a.createElement("section",{className:"hero is-fullheight horizontalCenter"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container"},s.a.createElement("div",null,s.a.createElement("p",{className:"subtitle is-1"},"Think global | Act Local")),s.a.createElement("section",{className:"section"},s.a.createElement("h3",{className:"title is-3"},"All categories:"),s.a.createElement("div",{className:"columns  is-multiline is-8 is-variable is-centered"},s.a.createElement(C,{categoriesFromBackEnd:this.props.categoriesFromBackEnd,currentUser:this.props.currentUser,className:"column"}))),s.a.createElement("button",{onClick:this.showModal,className:"button"},"Add New Category"),s.a.createElement("div",{className:"modal",id:"modal"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"section formModal"},s.a.createElement("form",{onSubmit:this.addNewCategory},s.a.createElement("p",{className:"title is-4"},"Add New Category"),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"titleCategory",placeholder:"New category title",onChange:this.updateInput,value:this.state.titleCategory}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"input",type:"textarea",name:"descriptionCategory",placeholder:"New category description",onChange:this.updateInput,value:this.state.descriptionCategory}))),s.a.createElement("div",{className:"field"},s.a.createElement("button",{onClick:this.closeModal,className:"button"},"Submit")))),s.a.createElement("button",{onClick:this.closeModal,className:"modal-close is-large","aria-label":"close"})))))):"Loading"}}]),t}(s.a.Component),_=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return console.log("-=-=-=-=-=-",this.props.theUser),s.a.createElement("nav",{className:" navbar impactNavbar is-spaced",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("a",{class:"navbar-item",href:"https://bulma.io"},s.a.createElement("img",{src:"",width:"112",height:"28"})),s.a.createElement("a",{role:"button",class:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{className:"navbar-menu is-spaced is-transparent"},s.a.createElement("div",{className:"navbar-start"},this.props.theUser&&s.a.createElement("div",null,s.a.createElement(N.b,{to:"/",className:"navbar-item is-inline"},"Home"),s.a.createElement(N.b,{to:"/profile",className:"navbar-item is-inline"},"Profile"),s.a.createElement(N.b,{to:"/community",className:"navbar-item is-inline"},"Community"))),s.a.createElement("div",{className:"navbar-end"},this.props.theUser&&s.a.createElement("button",{onClick:this.props.doLogout,className:"button is-transparent is-radiusless"},"Logout"),!this.props.theUser&&s.a.createElement("div",null,s.a.createElement(N.b,{to:"/login-page",className:"navbar-item is-inline"},"Login"),s.a.createElement(N.b,{to:"/signup-page",className:"navbar-item is-inline"}," ","Signup"," ")))))}}]),t}(s.a.Component),k=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).showCategoryDetails=function(){if(null!==a.props.currentUser){var e=a.state.arrayOfActions.filter((function(e){return e.category==a.state.currentCategory._id}));return console.log("Current category: ",a.props.location.state.details),s.a.createElement("div",null,s.a.createElement("p",{className:"title is-1"},a.state.currentCategory.title),s.a.createElement("p",{className:"subtitle is-1"},a.state.currentCategory.description),s.a.createElement("div",null,s.a.createElement("p",{className:"title is-4"},"Actions:"),s.a.createElement("div",{className:"columns  is-multiline is-8 is-variable is-centered"},e.map((function(e,t){return console.log(e),s.a.createElement("div",{className:"column is-3"},s.a.createElement("div",{className:"card",key:t},s.a.createElement("header",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},e.title)),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,e.description))),s.a.createElement("footer",{className:"card-footer is-centered"},s.a.createElement("button",{className:"button  is-fillwidth impactInlineButton",onClick:function(t){a.props.getActIdforActNow(e)}},"Act now!"))))})))))}return"loading"},a.toggleFormCategory=function(){a.setState({showEditCategoryForm:!a.state.showEditCategoryForm})},a.handleChange=function(e){console.log("changing value",e.target.name,e.target.value),a.setState(Object(f.a)({},e.target.name,e.target.value))},a.addNewActToDb=function(e){e.preventDefault(),console.log("#####",a.state);var t=Object(b.a)(a.state.arrayOfActions),n={title:a.state.titleAct,description:a.state.descriptionAct,value:a.state.valueOfAct,category:a.state.actCategory,author:a.props.currentUser};console.log("first",n.value),t.unshift(n),a.setState({showAddActForm:!1,titleAct:"",descriptionAct:"",valueOfAct:"",actCategory:"",arrayOfActions:t}),console.log("second",t),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/act/create"),n).then((function(e){a.props.getAllActions()})).catch((function(e){return console.log("Error while adding the new Act ",e)}))},a.editCategoryInDb=function(e){if(e.preventDefault(),null===a.state.currentCategory)return"loading category...";a.setState(Object(f.a)({},e.target.name,e.target.value));var t={_id:a.state.currentCategory._id,title:a.state.titleCat,description:a.state.descriptionCat,author:a.state.currentCategory.author},n=a.state.categoriesFromBackEnd.filter((function(e){return e._id!==a.state.currentCategory._id}));n.push(t),a.setState({showEditCategoryForm:!1,titleCat:"",descriptionCat:"",currentCategory:t,categoriesFromBackEnd:n}),console.log(">>>>",a.state),a.props.getCategoryObjforEdit(a.props.location.state.details,t)},a.showModal=function(){document.getElementById("displayModal");document.getElementById("modal").style.display="block"},a.closeModal=function(){var e=document.getElementById("modal");document.getElementsByClassName("modal-close")[0];e.style.display="none"},a.showModalCategory=function(){document.getElementById("displayModalCategory");var e=document.getElementById("modalCategory");document.getElementById("modal-close");e.style.display="block"},a.closeModalCategory=function(){var e=document.getElementById("modalCategory");document.getElementById("modalCategoryClose");e.style.display="none"},a.state={showAddActForm:!1,titleAct:"",descriptionAct:"",valueOfAct:"",actCategory:"",currentCategory:a.props.location.state.details,arrayOfActions:a.props.actionsFromBackEnd.allActs,categoriesFromBackEnd:a.props.categoriesFromBackEnd,showEditCategoryForm:!1,titleCat:"",descriptionCat:""},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return null!==this.props.currentUser?(console.log("_________________++__________"),console.log("CATEGORIES FROM BE",this.props.categoriesFromBackEnd),s.a.createElement("section",{className:"hero is-fullheight horizontalCenter"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"container"},s.a.createElement("div",null,s.a.createElement("div",null,this.showCategoryDetails(),s.a.createElement("div",null,s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"field"},s.a.createElement("button",{className:"button impactButton",onClick:this.showModal},"Add New Action")),s.a.createElement("div",{className:"modal",id:"modal"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"section formModal"},s.a.createElement("form",{onSubmit:this.addNewActToDb},s.a.createElement("p",{className:"title is-4"},"Add New Action"),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"titleAct",placeholder:"Name new action",value:this.state.titleAct,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"descriptionAct",placeholder:"Describe new action",value:this.state.descriptionAct,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"number",name:"valueOfAct",placeholder:"How many points its worth?",min:"0",value:this.state.valueOfAct,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"select  is-fullwidth"},s.a.createElement("select",{name:"actCategory",onChange:this.handleChange},s.a.createElement("option",{className:"option",value:"0"},"Pick category"),this.props.categoriesFromBackEnd.map((function(e){return s.a.createElement("option",{value:e._id,key:e._id},e.title)})))))),s.a.createElement("div",{className:"block"},s.a.createElement("p",{className:!0},s.a.createElement("button",{onClick:this.closeModal,className:"button"},"Submit"))))),s.a.createElement("button",{onClick:this.closeModal,className:" modal-close is-large","aria-label":"close"})))),s.a.createElement("div",{className:"column is-4 is-offset-4"},this.state.currentCategory.author===this.props.currentUser._id&&s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button",onClick:this.showModalCategory},"Edit Category"),s.a.createElement("div",{className:"modal",id:"modalCategory"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"section formModal"},s.a.createElement("form",{onSubmit:this.editCategoryInDb},s.a.createElement("p",{className:"title is-4"},"Edit ",this.state.currentCategory.title),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"titleCat",placeholder:this.state.currentCategory.title,onChange:this.handleChange,value:this.state.titleCat}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("textarea",{className:"input",type:"textarea",name:"descriptionCat",placeholder:this.state.currentCategory.description,value:this.state.descriptionCat,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("button",{onClick:this.closeModalCategory,className:"button"},"Save changes")))),s.a.createElement("button",{onClick:this.closeModalCategory,className:" modal-close is-large","aria-label":"close"})))),s.a.createElement("div",{className:"column"},s.a.createElement("button",{className:"button",onClick:function(){e.props.getCategoryObjforDelete(e.props.location.state.details)}},"Delete Category"," "))))))))))):p.push("/")}}]),t}(s.a.Component),w=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){e.preventDefault(),a.setState(Object(f.a)({},e.target.name,e.target.value)),console.log("State is:",a.state)},a.toggleForm=function(){a.setState({detailsUnfolded:!a.state.detailsUnfolded})},a.profileQuery=function(e){e.preventDefault();var t="&input_location_mode=1&input_location="+"".concat(a.state.zipCode)+"&input_income="+"".concat(a.state.income)+"&input_size="+"".concat(a.state.householdSize)+"&op=get_defaults_and_results";console.log("QUERY IS:",t),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/profile"),t).then((function(e){console.log("Response is:",e.data),a.setState({total:e.data.total,zipCode:"",householdSize:"",income:"",placeType:"",suggestedActs:a.props.currentUser.suggestedActs})})).catch((function(e){return console.log("Error while getting data from CC",e)}))},a.state={zipCode:"",householdSize:"",income:"",placeType:"",total:"",suggestedActs:a.props.suggestedActs},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return console.log("total:",this.state.total),console.log("User in PROFILE:",this.props.currentUser),null!==this.props.currentUser?s.a.createElement("section",{className:"hero is-medium horizontalCenter is-10"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"block"},s.a.createElement("p",{className:"impactTitle title is-2"},"Hi there, ",this.props.currentUser.fullName)),s.a.createElement("div",{class:"columns"},s.a.createElement("div",{class:"column is-two-fifths is-offset-1"},s.a.createElement("h1",{className:"impactTitle title is-4 "},"Let's get started!"),s.a.createElement("form",{onSubmit:this.profileQuery},s.a.createElement("div",null,s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("span",{className:"select  is-fullwidth"},s.a.createElement("select",{name:"placeType",onChange:this.handleChange},s.a.createElement("option",{selected:!0,className:"option",value:"0"},"Location by ..."),s.a.createElement("option",{className:"option",value:"1"},"Zip code"),s.a.createElement("option",{className:"option",value:"2"},"City"),s.a.createElement("option",{className:"option",value:"3"},"County"),s.a.createElement("option",{className:"option",value:"4"},"State"))),s.a.createElement("span",{class:"icon is-small is-left"},s.a.createElement("i",{class:"fa fa-home"})))),s.a.createElement("div",{className:"field "},s.a.createElement("p",{className:"control has-icons-left "},s.a.createElement("input",{className:"input",type:"text",name:"zipCode",placeholder:"Type your zip-code",onChange:this.handleChange,value:this.state.zipCode}),s.a.createElement("span",{className:"icon is-small is-left"},s.a.createElement("i",{className:"fa fa-globe"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left  is-medium"},s.a.createElement("span",{className:"select  is-fullwidth"},s.a.createElement("select",{name:"income",onChange:this.handleChange},s.a.createElement("option",{selected:!0,className:"option",value:"1"},"What is your average annual income?"),s.a.createElement("option",{className:"option",value:"2"},"Less than $10,000"),s.a.createElement("option",{className:"option",value:"3"},"$10,000 to $19,999"),s.a.createElement("option",{className:"option",value:"4"},"$20,000 to $29,999"),s.a.createElement("option",{className:"option",value:"5"},"$30,000 to $39,999"),s.a.createElement("option",{className:"option",value:"6"},"$40,000 to $49,999"),s.a.createElement("option",{className:"option",value:"7"},"$50,000 to $59,999"),s.a.createElement("option",{className:"option",value:"8"},"$60,000 to $79,999"),s.a.createElement("option",{className:"option",value:"9"},"$80,000 to $99,999"),s.a.createElement("option",{className:"option",value:"10"},"$100,000 to $119,999"),s.a.createElement("option",{className:"option",value:"11"},"$120,000 or more"))),s.a.createElement("span",{class:"icon is-small is-left"},s.a.createElement("i",{class:"fa fa-magic"})))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control has-icons-left"},s.a.createElement("span",{className:"select  is-fullwidth"},s.a.createElement("select",{name:"householdSize",onChange:this.handleChange},s.a.createElement("option",{selected:!0,className:"option",value:"1"},"How many people live in your household?"),s.a.createElement("option",{className:"option",value:"1"},"1 person"),s.a.createElement("option",{className:"option",value:"2"},"2 people"),s.a.createElement("option",{className:"option",value:"3"},"3 people"),s.a.createElement("option",{className:"option",value:"4"},"4 people"),s.a.createElement("option",{className:"option",value:"5"},"5 or more people"))),s.a.createElement("span",{class:"icon is-small is-left"},s.a.createElement("i",{class:"fa fa-users"}))))),s.a.createElement("div",{className:"block"}),s.a.createElement("div",{className:"block"},s.a.createElement("p",{className:!0},s.a.createElement("button",{className:"button"},"Submit"))))),s.a.createElement("div",{className:"column"},s.a.createElement("p",{className:"impactTitle title is-5"},"Annual carbon footprint of your household is"," ",this.state.total,s.a.createElement("br",null),"Your grade is:"),s.a.createElement("p",{className:"impactTitle title is-6"},"Your Impact score is: ",this.props.currentUser.score),!this.state.detailsUnfolded&&this.props.currentUser.score>0&&s.a.createElement("button",{className:"button impactButton",onClick:this.toggleForm},"View Details"),this.state.detailsUnfolded&&s.a.createElement("div",null,s.a.createElement("p",null,"Completed acts:"),this.props.currentUser.completedActs.map((function(e){return s.a.createElement("div",null,s.a.createElement("p",null,e),s.a.createElement("div",{key:e._id},s.a.createElement("b",null,e.title)," ",e.value))})),s.a.createElement("button",{className:"button",onClick:this.toggleForm},"Show Less")))),s.a.createElement("div",{className:"content"},s.a.createElement("p",{className:"impactTitle title is-5"},"Suggested Acts:"),s.a.createElement("div",{className:"columns  is-8 is-offset-1"},this.props.currentUser.suggestedActs.map((function(t,a){return s.a.createElement("div",{className:"column is-3"},s.a.createElement("div",{className:"card",key:a},s.a.createElement("header",{className:"card-header"},s.a.createElement("p",{className:"card-header-title is-centered"},t.title)),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,t.description))),s.a.createElement("footer",{className:"card-footer is-centered"},s.a.createElement("button",{className:"button  is-fillwidth impactInlineButton",onClick:function(a){e.handleChangeAct(t._id)}},"Act now!"))))})))))):"loading..."}}]),t}(n.Component),U=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).handleChangeAct=function(e){if(console.log("SUGGESTED ACTS IN DASHBOARD:",a.props.suggestedActs),null!==a.state.treatedSuggestedActs){var t=a.state.treatedSuggestedActs.filter((function(t){return t._id!==e})),n=a.state.treatedSuggestedActs.filter((function(t){return t._id===e}));console.log("SCORE",a.state.score);var s=n[0].value+a.state.score;console.log("To add",s),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/act/").concat(e,"/update"),{},{withCredentials:!0}).then((function(){a.setState({treatedSuggestedActs:t,score:s})})).catch((function(e){return console.log("Error while click on `Act Now`",e)}))}},a.handleViewDetails=function(){return a.setState({detailsUnfolded:!0}),s.a.createElement("div",null,s.a.createElement("p",null,"Completed acts:"),a.props.currentUser.completedActs.map((function(e,t){return s.a.createElement("div",{key:t},s.a.createElement("p",null,e,e.title," ",e.value,e.category))})))},a.toggleForm=function(){a.setState({detailsUnfolded:!a.state.detailsUnfolded})},a.showModal=function(){document.getElementById("displayModal");var e=document.getElementById("modal");document.getElementsByClassName("modal-close")[0];e.style.display="block"},a.closeModal=function(){var e=document.getElementById("modal");document.getElementsByClassName("modal-close")[0];e.style.display="none"},a.state={detailsUnfolded:!1,completedActs:a.props.completedActs,categoriesFromBackEnd:a.props.categoriesFromBackEnd,currentUser:""},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.getTheUser();this.setState({currentUser:e})}},{key:"render",value:function(){return console.log("Dashboard suggested acts:",this.props.currentUser.suggestedActs),null!==this.props.currentUser?s.a.createElement("section",{className:"hero is-medium"},s.a.createElement("div",{className:"hero-body"},s.a.createElement("div",{className:"block"},s.a.createElement("p",{className:"subtitle is-1"},"Hi there, ",this.props.currentUser.fullName)),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column"},s.a.createElement(w,null)),s.a.createElement("div",{className:"column"},s.a.createElement("h4",{className:"impactTitle title is-4"},"Your Score is: ",this.props.currentUser.score),!this.state.detailsUnfolded&&this.props.currentUser.score<0&&s.a.createElement("button",{onClick:this.toggleForm},"View Details"),this.state.detailsUnfolded&&s.a.createElement("div",null,s.a.createElement("p",null,"Completed acts:"),this.props.currentUser.suggestedActs.map((function(e){return s.a.createElement("div",null,s.a.createElement("div",{key:e._id},s.a.createElement("b",null,e.title)," ",e.value))})),s.a.createElement("button",{onClick:this.toggleForm},"Show Less")),s.a.createElement("p",null,"________________________________"),s.a.createElement("p",null,"Suggested Acts:"),this.props.currentUser.suggestedActs.map((function(e){return s.a.createElement("div",null,s.a.createElement("div",{key:e._id},e.title,s.a.createElement("br",null),e.value,s.a.createElement("br",null),e.category.title,s.a.createElement("p",null,"____________"),s.a.createElement("br",null)))}))))),s.a.createElement("div",null,s.a.createElement("p",null,"________________MODAL________________"),s.a.createElement("button",{onClick:this.showModal,className:"button is-large is-primary",id:"displayModal"},"Open Modal"),s.a.createElement("div",{className:"modal",id:"modal"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"section formModal"},s.a.createElement("form",{onSubmit:this.addNewActToDb},s.a.createElement("p",{className:"title is-4"},"Add New Action"),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"titleAct",placeholder:"Name new action",value:this.state.titleAct,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"descriptionAct",placeholder:"Describe new action",value:this.state.descriptionAct,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("input",{className:"input",type:"number",name:"valueOfAct",placeholder:"How many points its worth?",min:"0",value:this.state.valueOfAct,onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("p",{className:"control"},s.a.createElement("span",{className:"select  is-fullwidth"},s.a.createElement("select",{name:"actCategory",onChange:this.handleChange},s.a.createElement("option",{className:"option",value:""},"Pick category"),this.props.categoriesFromBackEnd.map((function(e){return s.a.createElement("option",{value:e._id,key:e._id},e.title)})))))),s.a.createElement("div",{className:"block"},s.a.createElement("p",{className:!0},s.a.createElement("button",{className:"button"},"Submit")))))),s.a.createElement("button",{onClick:this.closeModal,className:"modal-close is-large","aria-label":"close"})))):"Loading..."}}]),t}(s.a.Component),S=(n.Component,function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(m.a)(t).call(this,e))).getTheUser=function(){h.a.get("".concat("https://impact-sustainability.herokuapp.com/","/api/checkuser"),{withCredentials:!0}).then((function(e){console.log("User in APP.JS: ",e.data);var t=e.data.userDoc;a.syncCurrentUSer(t)})).catch((function(e){return console.log("Err while getting the user from the checkuser route: ",e)}))},a.getAllCategories=function(){h.a.get("".concat("https://impact-sustainability.herokuapp.com/","/category/allCats")).then((function(e){console.log("Categories from DB: ",e.data.allCategories),a.setState({categoriesFromBackEnd:e.data.allCategories})})).catch((function(e){return console.log("Err while getting categories: ",e)}))},a.getAllActions=function(){h.a.get("".concat("https://impact-sustainability.herokuapp.com/","/acts")).then((function(e){console.log("Actions are: ",e.data),a.setState({actionsFromBackEnd:e.data})})).catch((function(e){return console.log("Err while getting actions: ",e)}))},a.logout=function(){a.setState({currentUser:null}),h.a.delete("".concat("https://impact-sustainability.herokuapp.com/","/api/logout"),{withCredentials:!0}).then((function(){a.props.history.push("/")})).catch((function(e){return console.log("error while logging out ",e)}))},a.handleActNow=function(e){if(null===a.state.suggestedActs)return"there are no more Actions left! let'c make a new one";console.log("ACT ID FROM CATEGORY DETAILS IS :",e._id),console.log("CurrentUser IN APP.JS",a.state.currentUser),console.log("CurrentUser score IN APP.JS",a.state.currentUser.score);var t=a.state.suggestedActs.filter((function(t){return t._id!==e._id}));console.log("FINAL ACTS for user ARE: ",t),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/act/").concat(e._id,"/update"),{},{withCredentials:!0}).then((function(){a.state.currentUser.score+=e.value,console.log("Updated Score is: ",a.state.currentUser.score),a.setState({suggestedActs:t})})).catch((function(e){return console.log("Error while click on `Act Now`",e)}))},a.editCategory=function(e,t){if(console.log(">>>>>>>>>Do i have cat here: ",e),console.log("<<<<<<<<<Updated info: ",t),null!==e){var n=e._id,s=t;h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/category/").concat(n,"/update"),s).then((function(e){a.getAllCategories()})).catch((function(e){return console.log("Error while editing the Category ",e)}))}},a.deleteCategory=function(e){if(null===e)return"loading";var t=e._id;console.log("The id: ",t),h.a.post("".concat("https://impact-sustainability.herokuapp.com/","/category/").concat(t,"/delete")).then((function(t){var n=a.state.categoriesFromBackEnd.filter((function(t){return t._id!==e._id}));a.setState({categoriesFromBackEnd:n}),console.log("helllooooo: =-=-=-=-=-=-=-=-=-= ",p),p.push("/")})).catch((function(e){return console.log("Error while deleteing the category ",e)}))},a.state={currentUser:null,categoriesFromBackEnd:null,actionsFromBackEnd:null,suggestedActs:[]},a}return Object(u.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getTheUser(),this.getAllCategories(),this.getAllActions()}},{key:"syncCurrentUSer",value:function(e){console.log("USER:",e),this.setState({currentUser:e,suggestedActs:e.suggestedActs}),console.log("CURRENT USER`S ACTIONS in APP.js:",this.state.currentUser.suggestedActs)}},{key:"render",value:function(){var e=this;return console.log("APP.JS |  USER",this.state.currentUser),s.a.createElement("div",null,s.a.createElement("div",{className:""},s.a.createElement("header",{className:"container"},s.a.createElement(_,{theUser:this.state.currentUser,doLogout:this.logout,className:"navbar is-fixed-top is-primary",role:"navigation","aria-label":"main navigation"})),s.a.createElement(E.c,null,s.a.createElement(E.a,{exact:!0,path:"/signup-page",render:function(t){return s.a.createElement(v,Object.assign({},t,{currentUser:e.state.currentUser,onUserChange:function(t){return e.syncCurrentUSer(t)}}))}}),s.a.createElement(E.a,{exact:!0,path:"/login-page",render:function(t){return s.a.createElement(y,Object.assign({},t,{currentUser:e.state.currentUser,onUserChange:function(t){return e.syncCurrentUSer(t)}}))}}),s.a.createElement(E.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(A,Object.assign({},t,{getAllCategories:e.getAllCategories,currentUser:e.state.currentUser,suggestedActs:e.state.suggestedActs,categoriesFromBackEnd:e.state.categoriesFromBackEnd,actionsFromBackEnd:e.state.actionsFromBackEnd}))}}),s.a.createElement(E.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(C,Object.assign({},t,{currentUser:e.state.currentUser,blah:"blah",categoriesFromBackEnd:e.state.categoriesFromBackEnd,actionsFromBackEnd:e.state.actionsFromBackEnd}))}}),s.a.createElement(E.a,{path:"/category/",render:function(t){return s.a.createElement(k,Object.assign({},t,{getActIdforActNow:function(t){return e.handleActNow(t)},getCategoryObjforDelete:function(t){return e.deleteCategory(t)},getCategoryObjforEdit:function(t,a){return e.editCategory(t,a)},getAllActions:e.getAllActions,getAllCategories:e.getAllCategories,currentUser:e.state.currentUser,categoriesFromBackEnd:e.state.categoriesFromBackEnd,actionsFromBackEnd:e.state.actionsFromBackEnd}))}}),s.a.createElement(E.a,{exact:!0,path:"/dashboard",render:function(t){return s.a.createElement(U,Object.assign({},t,{getActIdforActNow:function(t){return e.handleActNow(t)},getTheUser:e.getTheUser,getAllActions:e.getAllActions,currentUser:e.state.currentUser,suggestedActs:e.state.suggestedActs,categoriesFromBackEnd:e.state.categoriesFromBackEnd,actionsFromBackEnd:e.state.actionsFromBackEnd}))}}),s.a.createElement(E.a,{exact:!0,path:"/profile",render:function(t){return s.a.createElement(w,Object.assign({},t,{suggestedActs:e.state.suggestedActs,getActIdforActNow:function(t){return e.handleActNow(t)},currentUser:e.state.currentUser,categoriesFromBackEnd:e.state.categoriesFromBackEnd,actionsFromBackEnd:e.state.actionsFromBackEnd}))}}))))}}]),t}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(63),a(64),a(65);c.a.render(s.a.createElement(E.b,{history:p},s.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[34,1,2]]]);
//# sourceMappingURL=main.b5883902.chunk.js.map